# 背景

本節では，まず，当研究チームの提案しているSDN-MPIの背景技術であるSDN
（Software-Defined Networking）について説明する．続いて，SDN-MPIのコンセプトを
紹介したのち，これまでのSDN-MPIのプロトタイプで残されていた課題を明らかにする
．

## SDN（Software-Defined Networking）

<!-- SDNの説明 -->
SDN-MPIは，計算ノード間を接続するの相互結合網がSDNアーキテクチャを採用している
ことを前提としている．SDN（Software-Defined Networking）\cite{sdn}は近年注目が
集まっている新しいネットワークアーキテクチャである．従来のネットワークアーキテ
クチャでは，パケット制御の決定を担うコントロールプレーンと実際のパケット転送を
担うデータプレーンは，単一のネットワークデバイス上に実装されていた．SDNでは，
図\ref{fig:sdn-arch}に示すように，コントロールプレーンとデータプレーンを別々の
デバイスに分離する．SDNスイッチと呼ばれるネットワークデバイスはデータプレーン
の処理のみを行い，SDNコントローラはネットワーク全体のコントロールプレーンの処
理を行う．SDNの利点としてネットワークがプログラム可能になること，動的な制御が
できること，集中制御ができることがあげられる．

![SDNのアーキテクチャ\label{fig:sdn-arch}](sdn-arch.pdf)

SDNの業界標準規格として，OpenFlow\cite{McKeown2008}がある．OpenFlowでは，ネッ
トワークの制御を「フロー」という単位で行う．フローは，対象のパケットを限定する
ヘッダフィールドと，パケットに対して行う操作を定義するアクションから成る．
OpenFlow 1.0では，ヘッダフィールドとしてTCP/UDPポート番号，IPアドレス，MACアド
レスなど事前定義された12種類が使用可能である．アクションにはパケットを特定の
ポートへ転送する，パケットのヘッダを書き換える，パケットをドロップするなどの操
作がある．OpenFlow対応スイッチは，フローの集合である「フローテーブル」を保持す
る．スイッチはパケットを受信すると，マッチするフローをフローテーブルから検索し
，フローのアクションを実行する．SDNコントローラは，ネットワーク内の全ての
OpenFlow対応スイッチのフローテーブルを操作することで，ネットワークを制御する．

## SDN-MPI

<!-- SDN-MPIのコンセプト -->
SDN-MPIのコンセプトを図 \ref{fig:sdn-mpi}に示す．SDN-MPIの基本的な考え方は，
MPIを利用するアプリケーションから分散プロセス間の通信特性を抽出し，SDNを用いて
通信特性に応じた最適なネットワーク制御を実行することにある．当研究チームは，こ
れまでの研究開発により，SDN-MPIのアイディアを応用しいくつかのMPI関数の高速化を
実証した．\cite{Dashdavaa2013,Takahashi2014}

しかしながら，これまでのプロトタイプ実装では，個別のMPI関数を単独で実行するこ
とを前提としていた．実際のMPIアプリケーションは，1つのアプリケーションが複数の
MPI関数を呼び出す．なおかつ，MPI関数の呼び出しの際に与えられる様々な引数もそれ
ぞれの呼び出しで異なる．引数としては，具体的には送信ランク・受信ランク・コミュ
ニケータなどがある．SDNコントローラが，アプリケーションの通信要求に応じて適
切なネットワーク制御を行うためには，現在どのMPI関数が，どの引数で呼びだされて
いるかという情報をリアルタイムに把握する必要がある．本報告では以後，この情報を
MPI通信パターンと呼ぶ．

また，SDNコントローラはMPIアプリケーションに同期してネットワーク制御を実行しな
ければいけない．さらに，この同期のためのオーバーヘッドは低くなければいけない．

![SDN-MPI概念図\label{fig:sdn-mpi}](sdn-mpi.pdf)

